# Experiment 5: Regulatory Compliance Configuration
# Validates DeepBridge compliance detection with 100% precision

experiment:
  name: "Regulatory Compliance Validation"
  type: "compliance"
  version: "1.0"
  seed: 42

# Test cases configuration
test_cases:
  total: 50
  with_violations: 25
  without_violations: 25
  samples_per_case: 1000

# Protected attributes to test
protected_attributes:
  - gender
  - race
  - age
  - marital_status
  - national_origin
  - religion
  - color
  - sex
  - disability
  - veteran_status

# EEOC compliance thresholds
eeoc:
  disparate_impact_threshold: 0.80  # Four-fifths rule
  question_21_min_representation: 0.02  # 2% minimum

# ECOA compliance
ecoa:
  protected_groups:
    - race
    - color
    - religion
    - national_origin
    - sex
    - marital_status
    - age  # â‰¥40

# Violation injection (for ground truth)
violations:
  gender_disparate_impact:
    type: "disparate_impact"
    attribute: "gender"
    expected_di: 0.67  # < 0.80
    description: "Males 60% approval, females 40% approval"

  race_black_disparate_impact:
    type: "disparate_impact"
    attribute: "race"
    subgroup: "Black"
    expected_di: 0.75  # < 0.80
    description: "Black applicants -10% approval bias"

  race_asian_representation:
    type: "question_21"
    attribute: "race"
    subgroup: "Asian"
    expected_representation: 0.015  # < 0.02
    description: "Asian representation below 2% threshold"

# Expected results
expected_results:
  deepbridge:
    precision: 1.00  # 100%
    recall: 1.00     # 100%
    f1_score: 1.00   # 100%
    feature_coverage: 1.00  # 10/10 attributes
    execution_time_minutes: 17
    confusion_matrix:
      tp: 25
      fp: 0
      tn: 25
      fn: 0

  baseline:
    precision: 0.87  # ~87%
    recall: 0.80     # ~80%
    f1_score: 0.83   # ~83%
    feature_coverage: 0.20  # 2/10 attributes
    execution_time_minutes: 285
    confusion_matrix:
      tp: 20
      fp: 3
      tn: 22
      fn: 5

# Audit time breakdown
audit_time:
  baseline_manual:
    collect_metrics: 60  # minutes
    verify_compliance: 45
    compile_report: 60
    legal_review: 120
    total: 285

  deepbridge:
    run_validation: 17  # minutes
    generate_report: 1
    legal_review: 30
    total: 48

  reduction_percentage: 83  # (285 - 48) / 285 * 100

# Statistical analysis
statistical_tests:
  proportions_test:
    h0: "Proportion(DeepBridge errors) = Proportion(Baseline errors)"
    h1: "Proportion(DeepBridge errors) < Proportion(Baseline errors)"
    expected_p_value: 0.001  # p < 0.001 (highly significant)

# Output paths
outputs:
  data_dir: "data"
  results_dir: "results"
  figures_dir: "figures"
  tables_dir: "tables"
  logs_dir: "logs"

  files:
    ground_truth: "results/compliance_ground_truth.json"
    deepbridge_results: "results/compliance_deepbridge_results.json"
    baseline_results: "results/compliance_baseline_results.json"
    confusion_matrix: "results/compliance_confusion_matrix.json"
    statistical_tests: "results/compliance_statistical_tests.json"
    latex_table: "tables/compliance_results.tex"

# Visualization settings
visualizations:
  - name: "confusion_matrix"
    type: "heatmap"
    output: "figures/compliance_confusion_matrix.pdf"

  - name: "precision_recall"
    type: "bar"
    output: "figures/compliance_precision_recall.pdf"

  - name: "feature_coverage"
    type: "bar"
    output: "figures/compliance_feature_coverage.pdf"

  - name: "audit_time"
    type: "bar"
    output: "figures/compliance_audit_time.pdf"

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  datefmt: "%Y-%m-%d %H:%M:%S"
